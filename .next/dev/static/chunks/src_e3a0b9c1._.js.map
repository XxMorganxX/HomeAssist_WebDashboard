{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/morgannstuart/Desktop/HomeAssistDashboard/src/components/Sidebar.tsx"],"sourcesContent":["import { MessageSquare, Activity, Settings, Zap } from 'lucide-react'\n\ninterface SidebarProps {\n  activeView: string\n  onViewChange: (view: string) => void\n  isConfigured?: boolean\n}\n\nexport function Sidebar({ activeView, onViewChange, isConfigured = false }: SidebarProps) {\n  return (\n    <aside className=\"sidebar\">\n      <div className=\"sidebar-header\">\n        <div className=\"logo\">\n          <Zap className=\"logo-icon\" />\n          <span>Chat Dashboard</span>\n        </div>\n      </div>\n\n      <nav className=\"sidebar-nav\">\n        <div className=\"nav-section\">\n          <span className=\"nav-section-title\">Views</span>\n          <button\n            className={`nav-item ${activeView === 'conversations' ? 'active' : ''}`}\n            onClick={() => onViewChange('conversations')}\n          >\n            <MessageSquare size={18} />\n            <span>Conversations</span>\n          </button>\n          <button\n            className={`nav-item ${activeView === 'realtime' ? 'active' : ''}`}\n            onClick={() => onViewChange('realtime')}\n          >\n            <Activity size={18} />\n            <span>Realtime Events</span>\n          </button>\n          <button\n            className={`nav-item ${activeView === 'settings' ? 'active' : ''}`}\n            onClick={() => onViewChange('settings')}\n          >\n            <Settings size={18} />\n            <span>Settings</span>\n          </button>\n        </div>\n      </nav>\n\n      <div className=\"sidebar-footer\">\n        <div className={`connection-status ${isConfigured ? 'connected' : ''}`}>\n          <span className=\"status-dot\" />\n          <span>{isConfigured ? 'Connected' : 'Not Connected'}</span>\n        </div>\n      </div>\n    </aside>\n  )\n}\n"],"names":[],"mappings":";;;;;AAAA;AAAA;AAAA;AAAA;;;AAQO,SAAS,QAAQ,EAAE,UAAU,EAAE,YAAY,EAAE,eAAe,KAAK,EAAgB;IACtF,qBACE,6LAAC;QAAM,WAAU;;0BACf,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC,0MAAG;4BAAC,WAAU;;;;;;sCACf,6LAAC;sCAAK;;;;;;;;;;;;;;;;;0BAIV,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAK,WAAU;sCAAoB;;;;;;sCACpC,6LAAC;4BACC,WAAW,CAAC,SAAS,EAAE,eAAe,kBAAkB,WAAW,IAAI;4BACvE,SAAS,IAAM,aAAa;;8CAE5B,6LAAC,4OAAa;oCAAC,MAAM;;;;;;8CACrB,6LAAC;8CAAK;;;;;;;;;;;;sCAER,6LAAC;4BACC,WAAW,CAAC,SAAS,EAAE,eAAe,aAAa,WAAW,IAAI;4BAClE,SAAS,IAAM,aAAa;;8CAE5B,6LAAC,yNAAQ;oCAAC,MAAM;;;;;;8CAChB,6LAAC;8CAAK;;;;;;;;;;;;sCAER,6LAAC;4BACC,WAAW,CAAC,SAAS,EAAE,eAAe,aAAa,WAAW,IAAI;4BAClE,SAAS,IAAM,aAAa;;8CAE5B,6LAAC,yNAAQ;oCAAC,MAAM;;;;;;8CAChB,6LAAC;8CAAK;;;;;;;;;;;;;;;;;;;;;;;0BAKZ,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAW,CAAC,kBAAkB,EAAE,eAAe,cAAc,IAAI;;sCACpE,6LAAC;4BAAK,WAAU;;;;;;sCAChB,6LAAC;sCAAM,eAAe,cAAc;;;;;;;;;;;;;;;;;;;;;;;AAK9C;KA7CgB"}},
    {"offset": {"line": 192, "column": 0}, "map": {"version":3,"sources":["file:///Users/morgannstuart/Desktop/HomeAssistDashboard/src/lib/supabase.ts"],"sourcesContent":["import { createClient, SupabaseClient } from '@supabase/supabase-js'\n\n// Check localStorage first, then fall back to env variables\nconst getSupabaseUrl = (): string => {\n  if (typeof window !== 'undefined') {\n    const stored = localStorage.getItem('supabase_url')\n    if (stored) return stored\n  }\n  return process.env.NEXT_PUBLIC_SUPABASE_URL || ''\n}\n\nconst getSupabaseAnonKey = (): string => {\n  if (typeof window !== 'undefined') {\n    const stored = localStorage.getItem('supabase_anon_key')\n    if (stored) return stored\n  }\n  return process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || ''\n}\n\nlet supabaseInstance: SupabaseClient | null = null\n\nexport const getSupabase = (): SupabaseClient => {\n  const url = getSupabaseUrl()\n  const key = getSupabaseAnonKey()\n  \n  if (!supabaseInstance && url && key) {\n    supabaseInstance = createClient(url, key)\n  }\n  \n  return supabaseInstance || createClient('https://placeholder.supabase.co', 'placeholder')\n}\n\nexport const reinitializeSupabase = (): SupabaseClient => {\n  const url = getSupabaseUrl()\n  const key = getSupabaseAnonKey()\n  \n  if (url && key) {\n    supabaseInstance = createClient(url, key)\n  }\n  \n  return supabaseInstance || createClient('https://placeholder.supabase.co', 'placeholder')\n}\n\nexport const isConfigured = (): boolean => {\n  const url = getSupabaseUrl()\n  const key = getSupabaseAnonKey()\n  return Boolean(url && key && url !== '' && key !== '')\n}\n\n// Server-side Supabase client (for API routes)\nexport const createServerSupabase = () => {\n  const url = process.env.NEXT_PUBLIC_SUPABASE_URL\n  const key = process.env.SUPABASE_SERVICE_ROLE_KEY || process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY\n  \n  if (!url || !key) {\n    throw new Error('Missing Supabase environment variables')\n  }\n  \n  return createClient(url, key)\n}\n"],"names":[],"mappings":";;;;;;;;;;AAQS;AART;;AAEA,4DAA4D;AAC5D,MAAM,iBAAiB;IACrB,wCAAmC;QACjC,MAAM,SAAS,aAAa,OAAO,CAAC;QACpC,IAAI,QAAQ,OAAO;IACrB;IACA,OAAO,2KAAO,CAAC,GAAG,CAAC,wBAAwB,IAAI;AACjD;AAEA,MAAM,qBAAqB;IACzB,wCAAmC;QACjC,MAAM,SAAS,aAAa,OAAO,CAAC;QACpC,IAAI,QAAQ,OAAO;IACrB;IACA,OAAO,2KAAO,CAAC,GAAG,CAAC,6BAA6B,IAAI;AACtD;AAEA,IAAI,mBAA0C;AAEvC,MAAM,cAAc;IACzB,MAAM,MAAM;IACZ,MAAM,MAAM;IAEZ,IAAI,CAAC,oBAAoB,OAAO,KAAK;QACnC,mBAAmB,IAAA,0LAAY,EAAC,KAAK;IACvC;IAEA,OAAO,oBAAoB,IAAA,0LAAY,EAAC,mCAAmC;AAC7E;AAEO,MAAM,uBAAuB;IAClC,MAAM,MAAM;IACZ,MAAM,MAAM;IAEZ,IAAI,OAAO,KAAK;QACd,mBAAmB,IAAA,0LAAY,EAAC,KAAK;IACvC;IAEA,OAAO,oBAAoB,IAAA,0LAAY,EAAC,mCAAmC;AAC7E;AAEO,MAAM,eAAe;IAC1B,MAAM,MAAM;IACZ,MAAM,MAAM;IACZ,OAAO,QAAQ,OAAO,OAAO,QAAQ,MAAM,QAAQ;AACrD;AAGO,MAAM,uBAAuB;IAClC,MAAM,MAAM,2KAAO,CAAC,GAAG,CAAC,wBAAwB;IAChD,MAAM,MAAM,2KAAO,CAAC,GAAG,CAAC,yBAAyB,IAAI,2KAAO,CAAC,GAAG,CAAC,6BAA6B;IAE9F,IAAI,CAAC,OAAO,CAAC,KAAK;QAChB,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO,IAAA,0LAAY,EAAC,KAAK;AAC3B"}},
    {"offset": {"line": 257, "column": 0}, "map": {"version":3,"sources":["file:///Users/morgannstuart/Desktop/HomeAssistDashboard/src/components/ConversationViewer.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { getSupabase } from '@/lib/supabase'\nimport { \n  MessageSquare, \n  User, \n  Bot, \n  Wrench, \n  ChevronRight,\n  RefreshCw,\n  Search,\n  Clock,\n  ChevronDown,\n  ChevronUp,\n  Settings2,\n  Mic,\n  Key\n} from 'lucide-react'\nimport type { ConversationSession, ConversationMessage, ToolCall } from '@/types/database'\n\ninterface MessageWithTools extends ConversationMessage {\n  tool_calls: ToolCall[]\n}\n\nexport function ConversationViewer() {\n  const [sessions, setSessions] = useState<ConversationSession[]>([])\n  const [selectedSession, setSelectedSession] = useState<string | null>(null)\n  const [messages, setMessages] = useState<MessageWithTools[]>([])\n  const [loading, setLoading] = useState(true)\n  const [messagesLoading, setMessagesLoading] = useState(false)\n  const [searchTerm, setSearchTerm] = useState('')\n  const [expandedTools, setExpandedTools] = useState<Set<number>>(new Set())\n  const [error, setError] = useState<string | null>(null)\n  const [token, setToken] = useState<string | null>(null)\n\n  useEffect(() => {\n    const savedToken = localStorage.getItem('dashboard_token')\n    setToken(savedToken)\n    if (savedToken) {\n      fetchSessions(savedToken)\n    } else {\n      setLoading(false)\n    }\n  }, [])\n\n  useEffect(() => {\n    if (selectedSession) {\n      fetchMessages(selectedSession)\n    }\n  }, [selectedSession])\n\n  const fetchSessions = async (userToken: string) => {\n    setLoading(true)\n    setError(null)\n    \n    try {\n      const supabase = getSupabase()\n      const { data, error: fetchError } = await supabase\n        .from('conversation_sessions')\n        .select('*')\n        .eq('user_id', userToken)\n        .order('started_at', { ascending: false })\n        .limit(100)\n\n      if (fetchError) {\n        console.error('Fetch error:', fetchError)\n        const errorMsg = fetchError.message || fetchError.code || JSON.stringify(fetchError)\n        setError(errorMsg || 'Failed to fetch sessions')\n        return\n      }\n      \n      setSessions(data || [])\n      \n      if (data && data.length > 0 && !selectedSession) {\n        setSelectedSession(data[0].id)\n      }\n    } catch (err) {\n      console.error('Failed to fetch sessions:', err)\n      setError(err instanceof Error ? err.message : 'Failed to fetch sessions')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const fetchMessages = async (sessionId: string) => {\n    setMessagesLoading(true)\n    try {\n      const supabase = getSupabase()\n      \n      const { data: messagesData, error: messagesError } = await supabase\n        .from('conversation_messages')\n        .select('*')\n        .eq('session_id', sessionId)\n        .order('timestamp', { ascending: true })\n\n      if (messagesError) throw messagesError\n\n      if (!messagesData || messagesData.length === 0) {\n        setMessages([])\n        return\n      }\n\n      const assistantMessageIds = messagesData\n        .filter(m => m.role === 'assistant')\n        .map(m => m.id)\n\n      let toolCallsMap: Record<number, ToolCall[]> = {}\n\n      if (assistantMessageIds.length > 0) {\n        const { data: toolCallsData, error: toolCallsError } = await supabase\n          .from('tool_calls')\n          .select('*')\n          .in('message_id', assistantMessageIds)\n          .order('executed_at', { ascending: true })\n\n        if (toolCallsError) {\n          console.error('Failed to fetch tool calls:', toolCallsError)\n        } else if (toolCallsData) {\n          toolCallsMap = toolCallsData.reduce((acc, tc) => {\n            if (!acc[tc.message_id]) acc[tc.message_id] = []\n            acc[tc.message_id].push(tc)\n            return acc\n          }, {} as Record<number, ToolCall[]>)\n        }\n      }\n\n      const messagesWithTools: MessageWithTools[] = messagesData.map(msg => ({\n        ...msg,\n        tool_calls: toolCallsMap[msg.id] || []\n      }))\n\n      setMessages(messagesWithTools)\n    } catch (err) {\n      console.error('Failed to fetch messages:', err)\n    } finally {\n      setMessagesLoading(false)\n    }\n  }\n\n  const handleRefresh = () => {\n    if (token) {\n      fetchSessions(token)\n    }\n  }\n\n  const toggleToolExpanded = (toolId: number) => {\n    setExpandedTools(prev => {\n      const next = new Set(prev)\n      if (next.has(toolId)) {\n        next.delete(toolId)\n      } else {\n        next.add(toolId)\n      }\n      return next\n    })\n  }\n\n  const filteredSessions = sessions.filter(session => {\n    const searchLower = searchTerm.toLowerCase()\n    return (\n      session.id.toLowerCase().includes(searchLower) ||\n      session.user_id?.toLowerCase().includes(searchLower) ||\n      session.wake_word_model?.toLowerCase().includes(searchLower)\n    )\n  })\n\n  const formatDate = (dateStr: string) => {\n    const date = new Date(dateStr)\n    const now = new Date()\n    const diffMs = now.getTime() - date.getTime()\n    const diffMins = Math.floor(diffMs / 60000)\n    const diffHours = Math.floor(diffMs / 3600000)\n    const diffDays = Math.floor(diffMs / 86400000)\n\n    if (diffMins < 1) return 'Just now'\n    if (diffMins < 60) return `${diffMins}m ago`\n    if (diffHours < 24) return `${diffHours}h ago`\n    if (diffDays < 7) return `${diffDays}d ago`\n    return date.toLocaleDateString()\n  }\n\n  const formatDuration = (session: ConversationSession) => {\n    if (!session.ended_at) return 'Active'\n    const start = new Date(session.started_at).getTime()\n    const end = new Date(session.ended_at).getTime()\n    const durationMs = end - start\n    const seconds = Math.floor(durationMs / 1000)\n    const minutes = Math.floor(seconds / 60)\n    if (minutes > 0) return `${minutes}m ${seconds % 60}s`\n    return `${seconds}s`\n  }\n\n  const renderToolCall = (toolCall: ToolCall) => {\n    const isExpanded = expandedTools.has(toolCall.id)\n\n    return (\n      <div key={toolCall.id} className=\"tool-call\">\n        <button \n          className=\"tool-call-header\"\n          onClick={() => toggleToolExpanded(toolCall.id)}\n        >\n          <div className=\"tool-call-info\">\n            <Wrench size={14} />\n            <span className=\"tool-name\">{toolCall.tool_name}</span>\n            {toolCall.duration_ms && (\n              <span className=\"tool-duration\">{toolCall.duration_ms.toFixed(0)}ms</span>\n            )}\n          </div>\n          {isExpanded ? <ChevronUp size={14} /> : <ChevronDown size={14} />}\n        </button>\n        \n        {isExpanded && (\n          <div className=\"tool-call-details\">\n            <div className=\"tool-section\">\n              <span className=\"tool-section-label\">Arguments</span>\n              <pre className=\"tool-code\">\n                {JSON.stringify(toolCall.arguments, null, 2)}\n              </pre>\n            </div>\n            {toolCall.result && (\n              <div className=\"tool-section\">\n                <span className=\"tool-section-label\">Result</span>\n                <pre className=\"tool-code\">{toolCall.result}</pre>\n              </div>\n            )}\n            <div className=\"tool-meta\">\n              <span>Executed: {new Date(toolCall.executed_at).toLocaleTimeString()}</span>\n            </div>\n          </div>\n        )}\n      </div>\n    )\n  }\n\n  const renderMessage = (message: MessageWithTools) => {\n    const isUser = message.role === 'user'\n    const isAssistant = message.role === 'assistant'\n    const isSystem = message.role === 'system'\n\n    return (\n      <div key={message.id} className={`message ${message.role}`}>\n        <div className=\"message-avatar\">\n          {isUser && <User size={18} />}\n          {isAssistant && <Bot size={18} />}\n          {isSystem && <Settings2 size={18} />}\n        </div>\n        \n        <div className=\"message-body\">\n          <div className=\"message-header\">\n            <span className=\"message-role\">\n              {isUser && 'User'}\n              {isAssistant && 'Assistant'}\n              {isSystem && 'System'}\n            </span>\n            <span className=\"message-time\">\n              {new Date(message.timestamp).toLocaleTimeString()}\n            </span>\n            {message.confidence !== null && (\n              <span className=\"message-confidence\">\n                {(message.confidence * 100).toFixed(0)}% confidence\n              </span>\n            )}\n            {!message.is_final && (\n              <span className=\"message-interim\">interim</span>\n            )}\n          </div>\n          \n          <div className=\"message-content\">\n            {message.content}\n          </div>\n          \n          {message.tool_calls && message.tool_calls.length > 0 && (\n            <div className=\"tool-calls\">\n              <div className=\"tool-calls-header\">\n                <Wrench size={14} />\n                <span>{message.tool_calls.length} tool call{message.tool_calls.length > 1 ? 's' : ''}</span>\n              </div>\n              {message.tool_calls.map(tc => renderToolCall(tc))}\n            </div>\n          )}\n        </div>\n      </div>\n    )\n  }\n\n  const getSessionPreview = (session: ConversationSession) => {\n    if (selectedSession === session.id && messages.length > 0) {\n      const firstUserMsg = messages.find(m => m.role === 'user')\n      if (firstUserMsg) {\n        return firstUserMsg.content.slice(0, 50) + (firstUserMsg.content.length > 50 ? '...' : '')\n      }\n    }\n    return null\n  }\n\n  // No token configured\n  if (!token) {\n    return (\n      <div className=\"conversation-viewer\">\n        <div className=\"no-token-state\">\n          <Key size={48} />\n          <h2>No Token Configured</h2>\n          <p>Go to Settings and enter your viewing token to see conversations.</p>\n          <p className=\"help-text\">Use the same token in your chatbot's API calls.</p>\n        </div>\n      </div>\n    )\n  }\n\n  if (error) {\n    return (\n      <div className=\"conversation-viewer\">\n        <div className=\"error-state\">\n          <div className=\"error-icon\">⚠️</div>\n          <h2>Connection Error</h2>\n          <p>{error}</p>\n          <button className=\"retry-btn\" onClick={handleRefresh}>\n            <RefreshCw size={16} />\n            Retry\n          </button>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"conversation-viewer\">\n      <div className=\"conversations-sidebar\">\n        <div className=\"conversations-header\">\n          <h3>\n            <MessageSquare size={18} />\n            Sessions\n          </h3>\n          <button className=\"icon-btn\" onClick={handleRefresh} title=\"Refresh\">\n            <RefreshCw size={16} className={loading ? 'spinning' : ''} />\n          </button>\n        </div>\n        \n        <div className=\"conversations-search\">\n          <Search size={14} />\n          <input\n            type=\"text\"\n            placeholder=\"Search sessions...\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n          />\n        </div>\n\n        <div className=\"conversations-list\">\n          {loading ? (\n            <div className=\"loading-state small\">\n              <div className=\"spinner\" />\n            </div>\n          ) : filteredSessions.length === 0 ? (\n            <div className=\"empty-conversations\">\n              <MessageSquare size={24} />\n              <span>No sessions found</span>\n              <span className=\"help-text\">Sessions with token \"{token.slice(0, 8)}...\" will appear here</span>\n            </div>\n          ) : (\n            filteredSessions.map((session) => (\n              <button\n                key={session.id}\n                className={`conversation-item ${selectedSession === session.id ? 'active' : ''}`}\n                onClick={() => setSelectedSession(session.id)}\n              >\n                <div className=\"conversation-info\">\n                  <span className=\"conversation-title\">\n                    {session.wake_word_model ? (\n                      <><Mic size={12} /> {session.wake_word_model}</>\n                    ) : (\n                      `Session ${session.id.slice(0, 8)}...`\n                    )}\n                  </span>\n                  <span className=\"conversation-preview\">\n                    {getSessionPreview(session) || `Started ${formatDate(session.started_at)}`}\n                  </span>\n                  <div className=\"session-meta-row\">\n                    <span className={`session-status ${session.ended_at ? 'ended' : 'active'}`}>\n                      {session.ended_at ? 'Ended' : 'Active'}\n                    </span>\n                    <span className=\"session-duration\">{formatDuration(session)}</span>\n                  </div>\n                </div>\n                <div className=\"conversation-meta\">\n                  <Clock size={12} />\n                  <span>{formatDate(session.started_at)}</span>\n                </div>\n                <ChevronRight size={14} className=\"conversation-arrow\" />\n              </button>\n            ))\n          )}\n        </div>\n      </div>\n\n      <div className=\"messages-panel\">\n        {!selectedSession ? (\n          <div className=\"no-conversation\">\n            <MessageSquare size={48} />\n            <h2>Select a Session</h2>\n            <p>Choose a conversation session from the sidebar to view its messages</p>\n          </div>\n        ) : messagesLoading ? (\n          <div className=\"loading-state\">\n            <div className=\"spinner\" />\n            <span>Loading messages...</span>\n          </div>\n        ) : messages.length === 0 ? (\n          <div className=\"no-messages\">\n            <MessageSquare size={32} />\n            <p>No messages in this session</p>\n          </div>\n        ) : (\n          <div className=\"messages-container\">\n            <div className=\"messages-header\">\n              <div className=\"messages-header-info\">\n                <h2>\n                  {sessions.find(s => s.id === selectedSession)?.wake_word_model || \n                   `Session ${selectedSession.slice(0, 8)}...`}\n                </h2>\n                <span className=\"session-id\">{selectedSession}</span>\n              </div>\n              <div className=\"messages-header-meta\">\n                <span className=\"message-count\">{messages.length} messages</span>\n                <span className=\"tool-count\">\n                  {messages.reduce((acc, m) => acc + (m.tool_calls?.length || 0), 0)} tool calls\n                </span>\n              </div>\n            </div>\n            <div className=\"messages-list\">\n              {messages.map(renderMessage)}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1244, "column": 0}, "map": {"version":3,"sources":["file:///Users/morgannstuart/Desktop/HomeAssistDashboard/src/components/RealtimeMonitor.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect, useRef } from 'react'\nimport { getSupabase } from '@/lib/supabase'\nimport { RealtimeChannel } from '@supabase/supabase-js'\nimport { Activity, Play, Square, Trash2, Filter, MessageSquare, Wrench, Radio, Key } from 'lucide-react'\nimport type { RealtimeEvent } from '@/types/database'\n\nconst MONITORED_TABLES = ['conversation_sessions', 'conversation_messages', 'tool_calls']\n\nexport function RealtimeMonitor() {\n  const [events, setEvents] = useState<RealtimeEvent[]>([])\n  const [isListening, setIsListening] = useState(false)\n  const [selectedTables, setSelectedTables] = useState<string[]>(MONITORED_TABLES)\n  const [filterType, setFilterType] = useState<string>('all')\n  const [token, setToken] = useState<string | null>(null)\n  const channelRef = useRef<RealtimeChannel | null>(null)\n  const eventsEndRef = useRef<HTMLDivElement>(null)\n\n  useEffect(() => {\n    const savedToken = localStorage.getItem('dashboard_token')\n    setToken(savedToken)\n  }, [])\n\n  const startListening = () => {\n    if (selectedTables.length === 0 || !token) return\n\n    const supabase = getSupabase()\n    const channel = supabase.channel('realtime-monitor')\n\n    selectedTables.forEach((table) => {\n      channel.on(\n        'postgres_changes',\n        { event: '*', schema: 'public', table },\n        (payload) => {\n          // Filter events by token (user_id)\n          const newData = payload.new as Record<string, unknown> | undefined\n          const oldData = payload.old as Record<string, unknown> | undefined\n          \n          // For sessions, check user_id directly\n          if (table === 'conversation_sessions') {\n            const userId = newData?.user_id || oldData?.user_id\n            if (userId !== token) return\n          }\n          \n          // For messages and tool_calls, we show all (they're linked via session)\n          // In a production app, you'd join to check the session's user_id\n          \n          const event: RealtimeEvent = {\n            id: `${Date.now()}-${Math.random()}`,\n            timestamp: new Date(),\n            table,\n            eventType: payload.eventType as 'INSERT' | 'UPDATE' | 'DELETE',\n            payload: payload.new || payload.old || {}\n          }\n          setEvents((prev) => [event, ...prev].slice(0, 200))\n        }\n      )\n    })\n\n    channel.subscribe((status) => {\n      if (status === 'SUBSCRIBED') {\n        setIsListening(true)\n      }\n    })\n\n    channelRef.current = channel\n  }\n\n  const stopListening = () => {\n    if (channelRef.current) {\n      const supabase = getSupabase()\n      supabase.removeChannel(channelRef.current)\n      channelRef.current = null\n    }\n    setIsListening(false)\n  }\n\n  const toggleTable = (table: string) => {\n    setSelectedTables((prev) =>\n      prev.includes(table)\n        ? prev.filter((t) => t !== table)\n        : [...prev, table]\n    )\n  }\n\n  const clearEvents = () => {\n    setEvents([])\n  }\n\n  const filteredEvents = events.filter((event) =>\n    filterType === 'all' ? true : event.eventType === filterType\n  )\n\n  useEffect(() => {\n    return () => {\n      stopListening()\n    }\n  }, [])\n\n  useEffect(() => {\n    if (events.length > 0) {\n      eventsEndRef.current?.scrollIntoView({ behavior: 'smooth' })\n    }\n  }, [events.length])\n\n  const getEventColor = (type: string) => {\n    switch (type) {\n      case 'INSERT':\n        return 'event-insert'\n      case 'UPDATE':\n        return 'event-update'\n      case 'DELETE':\n        return 'event-delete'\n      default:\n        return ''\n    }\n  }\n\n  const getTableIcon = (table: string) => {\n    if (table === 'conversation_messages') return <MessageSquare size={14} />\n    if (table === 'tool_calls') return <Wrench size={14} />\n    if (table === 'conversation_sessions') return <Radio size={14} />\n    return <Activity size={14} />\n  }\n\n  const getTableLabel = (table: string) => {\n    switch (table) {\n      case 'conversation_sessions': return 'Sessions'\n      case 'conversation_messages': return 'Messages'\n      case 'tool_calls': return 'Tool Calls'\n      default: return table\n    }\n  }\n\n  const renderEventPreview = (event: RealtimeEvent) => {\n    const payload = event.payload\n    const role = payload.role as string | undefined\n    const content = payload.content as string | undefined\n    const wakeWordModel = payload.wake_word_model as string | undefined\n    const endedAt = payload.ended_at as string | undefined\n    const userId = payload.user_id as string | undefined\n    const toolName = payload.tool_name as string | undefined\n    const durationMs = payload.duration_ms as number | undefined\n    const result = payload.result as string | undefined\n    \n    if (event.table === 'conversation_messages') {\n      return (\n        <div className=\"event-preview\">\n          {role && <span className=\"preview-role\">{role}</span>}\n          {content && (\n            <span className=\"preview-content\">\n              {content.slice(0, 100)}\n              {content.length > 100 ? '...' : ''}\n            </span>\n          )}\n        </div>\n      )\n    }\n\n    if (event.table === 'conversation_sessions') {\n      return (\n        <div className=\"event-preview\">\n          {wakeWordModel && (\n            <span className=\"preview-title\">Wake word: {wakeWordModel}</span>\n          )}\n          <span className=\"preview-id\">\n            {endedAt ? 'Session ended' : 'Session started'}\n            {userId && ` • User: ${userId.slice(0, 8)}...`}\n          </span>\n        </div>\n      )\n    }\n\n    if (event.table === 'tool_calls') {\n      return (\n        <div className=\"event-preview\">\n          {toolName && (\n            <span className=\"preview-tool\">\n              <Wrench size={12} />\n              {toolName}\n            </span>\n          )}\n          {durationMs !== undefined && (\n            <span className=\"preview-duration\">{durationMs.toFixed(0)}ms</span>\n          )}\n          {result && (\n            <span className=\"preview-content\">\n              {result.slice(0, 80)}\n              {result.length > 80 ? '...' : ''}\n            </span>\n          )}\n        </div>\n      )\n    }\n\n    return null\n  }\n\n  // No token configured\n  if (!token) {\n    return (\n      <div className=\"realtime-monitor\">\n        <div className=\"no-token-state\">\n          <Key size={48} />\n          <h2>No Token Configured</h2>\n          <p>Go to Settings and enter your viewing token to monitor events.</p>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"realtime-monitor\">\n      <div className=\"monitor-header\">\n        <div className=\"monitor-title\">\n          <Activity size={20} className={isListening ? 'pulse' : ''} />\n          <h2>Realtime Events</h2>\n          {isListening && <span className=\"live-badge\">LIVE</span>}\n        </div>\n        <div className=\"monitor-actions\">\n          {!isListening ? (\n            <button\n              className=\"action-btn start\"\n              onClick={startListening}\n              disabled={selectedTables.length === 0}\n            >\n              <Play size={16} />\n              Start Listening\n            </button>\n          ) : (\n            <button className=\"action-btn stop\" onClick={stopListening}>\n              <Square size={16} />\n              Stop\n            </button>\n          )}\n          <button\n            className=\"icon-btn\"\n            onClick={clearEvents}\n            disabled={events.length === 0}\n          >\n            <Trash2 size={16} />\n          </button>\n        </div>\n      </div>\n\n      <div className=\"monitor-body\">\n        <div className=\"monitor-sidebar\">\n          <div className=\"sidebar-section\">\n            <h4>Monitor Tables</h4>\n            <div className=\"table-checkboxes\">\n              {MONITORED_TABLES.map((table) => (\n                <label key={table} className=\"checkbox-label\">\n                  <input\n                    type=\"checkbox\"\n                    checked={selectedTables.includes(table)}\n                    onChange={() => toggleTable(table)}\n                    disabled={isListening}\n                  />\n                  <span>{getTableLabel(table)}</span>\n                </label>\n              ))}\n            </div>\n          </div>\n\n          <div className=\"sidebar-section\">\n            <h4>\n              <Filter size={14} />\n              Filter Events\n            </h4>\n            <div className=\"filter-buttons\">\n              {['all', 'INSERT', 'UPDATE', 'DELETE'].map((type) => (\n                <button\n                  key={type}\n                  className={`filter-btn ${filterType === type ? 'active' : ''}`}\n                  onClick={() => setFilterType(type)}\n                >\n                  {type === 'all' ? 'All' : type}\n                </button>\n              ))}\n            </div>\n          </div>\n\n          <div className=\"sidebar-section stats\">\n            <h4>Statistics</h4>\n            <div className=\"stat-item\">\n              <span>Total Events</span>\n              <strong>{events.length}</strong>\n            </div>\n            <div className=\"stat-item\">\n              <span>Inserts</span>\n              <strong className=\"text-green\">\n                {events.filter((e) => e.eventType === 'INSERT').length}\n              </strong>\n            </div>\n            <div className=\"stat-item\">\n              <span>Updates</span>\n              <strong className=\"text-yellow\">\n                {events.filter((e) => e.eventType === 'UPDATE').length}\n              </strong>\n            </div>\n            <div className=\"stat-item\">\n              <span>Deletes</span>\n              <strong className=\"text-red\">\n                {events.filter((e) => e.eventType === 'DELETE').length}\n              </strong>\n            </div>\n          </div>\n\n          <div className=\"sidebar-section stats\">\n            <h4>By Table</h4>\n            <div className=\"stat-item\">\n              <span>Sessions</span>\n              <strong>{events.filter(e => e.table === 'conversation_sessions').length}</strong>\n            </div>\n            <div className=\"stat-item\">\n              <span>Messages</span>\n              <strong>{events.filter(e => e.table === 'conversation_messages').length}</strong>\n            </div>\n            <div className=\"stat-item\">\n              <span>Tool Calls</span>\n              <strong>{events.filter(e => e.table === 'tool_calls').length}</strong>\n            </div>\n          </div>\n\n          <div className=\"sidebar-section\">\n            <h4>Token</h4>\n            <div className=\"token-display\">\n              {token.slice(0, 12)}...\n            </div>\n          </div>\n        </div>\n\n        <div className=\"events-panel\">\n          {filteredEvents.length === 0 ? (\n            <div className=\"empty-events\">\n              {isListening ? (\n                <>\n                  <Activity size={32} className=\"pulse\" />\n                  <p>Waiting for events...</p>\n                  <span>Database changes will appear here in real-time</span>\n                </>\n              ) : (\n                <>\n                  <Activity size={32} />\n                  <p>Not listening</p>\n                  <span>Click \"Start Listening\" to monitor database changes</span>\n                </>\n              )}\n            </div>\n          ) : (\n            <div className=\"events-list\">\n              {filteredEvents.map((event) => (\n                <div key={event.id} className={`event-item ${getEventColor(event.eventType)}`}>\n                  <div className=\"event-header\">\n                    <span className={`event-type ${event.eventType.toLowerCase()}`}>\n                      {event.eventType}\n                    </span>\n                    <span className=\"event-table\">\n                      {getTableIcon(event.table)}\n                      {getTableLabel(event.table)}\n                    </span>\n                    <span className=\"event-time\">\n                      {event.timestamp.toLocaleTimeString()}\n                    </span>\n                  </div>\n                  {renderEventPreview(event)}\n                  <details className=\"event-details\">\n                    <summary>Raw payload</summary>\n                    <pre className=\"event-payload\">\n                      {JSON.stringify(event.payload, null, 2)}\n                    </pre>\n                  </details>\n                </div>\n              ))}\n              <div ref={eventsEndRef} />\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2191, "column": 0}, "map": {"version":3,"sources":["file:///Users/morgannstuart/Desktop/HomeAssistDashboard/src/components/Settings.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { Save, Check, AlertCircle, Key, Copy } from 'lucide-react'\n\ninterface SettingsProps {\n  onConnectionChange?: () => void\n}\n\nexport function Settings({ onConnectionChange }: SettingsProps) {\n  const [token, setToken] = useState('')\n  const [saved, setSaved] = useState(false)\n  const [copied, setCopied] = useState(false)\n\n  useEffect(() => {\n    const savedToken = localStorage.getItem('dashboard_token') || ''\n    setToken(savedToken)\n  }, [])\n\n  const handleSave = () => {\n    localStorage.setItem('dashboard_token', token)\n    setSaved(true)\n    setTimeout(() => setSaved(false), 2000)\n    onConnectionChange?.()\n  }\n\n  const generateToken = () => {\n    const newToken = crypto.randomUUID()\n    setToken(newToken)\n  }\n\n  const copyToken = () => {\n    navigator.clipboard.writeText(token)\n    setCopied(true)\n    setTimeout(() => setCopied(false), 2000)\n  }\n\n  const isConfigured = Boolean(token)\n\n  return (\n    <div className=\"settings-page\">\n      <div className=\"settings-header\">\n        <h2>Settings</h2>\n        <p>Configure your viewing token to see your chatbot's conversations</p>\n      </div>\n\n      <div className=\"settings-content\">\n        <div className=\"settings-card\">\n          <div className=\"card-header\">\n            <h3>Connection Status</h3>\n          </div>\n          <div className=\"card-body\">\n            <div className={`status-indicator ${isConfigured ? 'connected' : 'disconnected'}`}>\n              {isConfigured ? (\n                <>\n                  <Check size={20} />\n                  <span>Token configured - Ready to view conversations</span>\n                </>\n              ) : (\n                <>\n                  <AlertCircle size={20} />\n                  <span>No token set - Enter or generate a token below</span>\n                </>\n              )}\n            </div>\n          </div>\n        </div>\n\n        <div className=\"settings-card\">\n          <div className=\"card-header\">\n            <h3>Viewing Token</h3>\n          </div>\n          <div className=\"card-body\">\n            <p className=\"info-text\">\n              This token links your chatbot's API calls to this dashboard. \n              Use the same token in your chatbot's API requests.\n            </p>\n\n            <div className=\"form-group\">\n              <label htmlFor=\"token\">\n                <Key size={14} />\n                Token\n              </label>\n              <div className=\"token-input-row\">\n                <input\n                  id=\"token\"\n                  type=\"text\"\n                  placeholder=\"Enter or generate a token\"\n                  value={token}\n                  onChange={(e) => setToken(e.target.value)}\n                />\n                <button \n                  className=\"icon-btn\" \n                  onClick={copyToken} \n                  title=\"Copy token\"\n                  disabled={!token}\n                >\n                  {copied ? <Check size={16} /> : <Copy size={16} />}\n                </button>\n              </div>\n              <span className=\"help-text\">\n                Use any string as your token, or generate a random one\n              </span>\n            </div>\n\n            <div className=\"button-row\">\n              <button className=\"secondary-btn\" onClick={generateToken}>\n                Generate Random Token\n              </button>\n              <button \n                className=\"save-btn\" \n                onClick={handleSave}\n                disabled={!token}\n              >\n                {saved ? <Check size={16} /> : <Save size={16} />}\n                {saved ? 'Saved!' : 'Save Token'}\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"settings-card\">\n          <div className=\"card-header\">\n            <h3>API Usage</h3>\n          </div>\n          <div className=\"card-body\">\n            <p className=\"info-text\">\n              Include your token as <code>user_id</code> in API requests:\n            </p>\n            <pre className=\"code-block\">\n{`curl -X POST ${typeof window !== 'undefined' ? window.location.origin : 'https://your-app.vercel.app'}/api/sessions \\\\\n  -H \"Content-Type: application/json\" \\\\\n  -d '{\n    \"user_id\": \"${token || 'YOUR_TOKEN'}\",\n    \"wake_word_model\": \"hey-assistant\"\n  }'`}\n            </pre>\n\n            <p className=\"info-text\" style={{ marginTop: '16px' }}>\n              All API endpoints use the same <code>user_id</code> to link data:\n            </p>\n            <ul className=\"endpoint-list\">\n              <li><code>POST /api/sessions</code> - Create session with <code>user_id</code></li>\n              <li><code>POST /api/messages</code> - Messages inherit session's user_id</li>\n              <li><code>POST /api/tool-calls</code> - Tool calls inherit message's session</li>\n              <li><code>POST /api/sessions/[id]/end</code> - End a session</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;;;AAHA;;;AASO,SAAS,SAAS,EAAE,kBAAkB,EAAiB;;IAC5D,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IACnC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IACnC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;IAErC,IAAA,0KAAS;8BAAC;YACR,MAAM,aAAa,aAAa,OAAO,CAAC,sBAAsB;YAC9D,SAAS;QACX;6BAAG,EAAE;IAEL,MAAM,aAAa;QACjB,aAAa,OAAO,CAAC,mBAAmB;QACxC,SAAS;QACT,WAAW,IAAM,SAAS,QAAQ;QAClC;IACF;IAEA,MAAM,gBAAgB;QACpB,MAAM,WAAW,OAAO,UAAU;QAClC,SAAS;IACX;IAEA,MAAM,YAAY;QAChB,UAAU,SAAS,CAAC,SAAS,CAAC;QAC9B,UAAU;QACV,WAAW,IAAM,UAAU,QAAQ;IACrC;IAEA,MAAM,eAAe,QAAQ;IAE7B,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;kCAAG;;;;;;kCACJ,6LAAC;kCAAE;;;;;;;;;;;;0BAGL,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC;8CAAG;;;;;;;;;;;0CAEN,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC;oCAAI,WAAW,CAAC,iBAAiB,EAAE,eAAe,cAAc,gBAAgB;8CAC9E,6BACC;;0DACE,6LAAC,gNAAK;gDAAC,MAAM;;;;;;0DACb,6LAAC;0DAAK;;;;;;;qEAGR;;0DACE,6LAAC,sOAAW;gDAAC,MAAM;;;;;;0DACnB,6LAAC;0DAAK;;;;;;;;;;;;;;;;;;;;;;;;kCAOhB,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC;8CAAG;;;;;;;;;;;0CAEN,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAE,WAAU;kDAAY;;;;;;kDAKzB,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAM,SAAQ;;kEACb,6LAAC,0MAAG;wDAAC,MAAM;;;;;;oDAAM;;;;;;;0DAGnB,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDACC,IAAG;wDACH,MAAK;wDACL,aAAY;wDACZ,OAAO;wDACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;;;;;;kEAE1C,6LAAC;wDACC,WAAU;wDACV,SAAS;wDACT,OAAM;wDACN,UAAU,CAAC;kEAEV,uBAAS,6LAAC,gNAAK;4DAAC,MAAM;;;;;iFAAS,6LAAC,6MAAI;4DAAC,MAAM;;;;;;;;;;;;;;;;;0DAGhD,6LAAC;gDAAK,WAAU;0DAAY;;;;;;;;;;;;kDAK9B,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAO,WAAU;gDAAgB,SAAS;0DAAe;;;;;;0DAG1D,6LAAC;gDACC,WAAU;gDACV,SAAS;gDACT,UAAU,CAAC;;oDAEV,sBAAQ,6LAAC,gNAAK;wDAAC,MAAM;;;;;6EAAS,6LAAC,6MAAI;wDAAC,MAAM;;;;;;oDAC1C,QAAQ,WAAW;;;;;;;;;;;;;;;;;;;;;;;;;kCAM5B,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC;8CAAG;;;;;;;;;;;0CAEN,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAE,WAAU;;4CAAY;0DACD,6LAAC;0DAAK;;;;;;4CAAc;;;;;;;kDAE5C,6LAAC;wCAAI,WAAU;kDAC1B,CAAC,aAAa,EAAE,uCAAgC,OAAO,QAAQ,CAAC,MAAM,GAAG,wBAA8B;;;gBAGxF,EAAE,SAAS,aAAa;;IAEpC,CAAC;;;;;;kDAGO,6LAAC;wCAAE,WAAU;wCAAY,OAAO;4CAAE,WAAW;wCAAO;;4CAAG;0DACtB,6LAAC;0DAAK;;;;;;4CAAc;;;;;;;kDAErD,6LAAC;wCAAG,WAAU;;0DACZ,6LAAC;;kEAAG,6LAAC;kEAAK;;;;;;oDAAyB;kEAAuB,6LAAC;kEAAK;;;;;;;;;;;;0DAChE,6LAAC;;kEAAG,6LAAC;kEAAK;;;;;;oDAAyB;;;;;;;0DACnC,6LAAC;;kEAAG,6LAAC;kEAAK;;;;;;oDAA2B;;;;;;;0DACrC,6LAAC;;kEAAG,6LAAC;kEAAK;;;;;;oDAAkC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO1D;GA/IgB;KAAA"}},
    {"offset": {"line": 2683, "column": 0}, "map": {"version":3,"sources":["file:///Users/morgannstuart/Desktop/HomeAssistDashboard/src/app/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect, useCallback } from 'react'\nimport { Sidebar } from '@/components/Sidebar'\nimport { ConversationViewer } from '@/components/ConversationViewer'\nimport { RealtimeMonitor } from '@/components/RealtimeMonitor'\nimport { Settings } from '@/components/Settings'\n\nexport default function Home() {\n  const [activeView, setActiveView] = useState('conversations')\n  const [configured, setConfigured] = useState(false)\n  const [key, setKey] = useState(0)\n\n  const checkConfiguration = useCallback(() => {\n    const token = localStorage.getItem('dashboard_token')\n    const isReady = Boolean(token)\n    setConfigured(isReady)\n    if (!isReady) {\n      setActiveView('settings')\n    }\n  }, [])\n\n  useEffect(() => {\n    checkConfiguration()\n  }, [checkConfiguration])\n\n  const handleConnectionChange = () => {\n    checkConfiguration()\n    setKey(prev => prev + 1)\n    const token = localStorage.getItem('dashboard_token')\n    if (token) {\n      setActiveView('conversations')\n    }\n  }\n\n  const renderContent = () => {\n    switch (activeView) {\n      case 'conversations':\n        return <ConversationViewer key={key} />\n      case 'realtime':\n        return <RealtimeMonitor key={key} />\n      case 'settings':\n        return <Settings onConnectionChange={handleConnectionChange} />\n      default:\n        return <ConversationViewer key={key} />\n    }\n  }\n\n  return (\n    <div className=\"app\">\n      <Sidebar\n        activeView={activeView}\n        onViewChange={setActiveView}\n        isConfigured={configured}\n      />\n      <main className=\"main-content\">\n        {renderContent()}\n      </main>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;;;AANA;;;;;;AAQe,SAAS;;IACtB,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;IAC7C,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;IAC7C,MAAM,CAAC,KAAK,OAAO,GAAG,IAAA,yKAAQ,EAAC;IAE/B,MAAM,qBAAqB,IAAA,4KAAW;gDAAC;YACrC,MAAM,QAAQ,aAAa,OAAO,CAAC;YACnC,MAAM,UAAU,QAAQ;YACxB,cAAc;YACd,IAAI,CAAC,SAAS;gBACZ,cAAc;YAChB;QACF;+CAAG,EAAE;IAEL,IAAA,0KAAS;0BAAC;YACR;QACF;yBAAG;QAAC;KAAmB;IAEvB,MAAM,yBAAyB;QAC7B;QACA,OAAO,CAAA,OAAQ,OAAO;QACtB,MAAM,QAAQ,aAAa,OAAO,CAAC;QACnC,IAAI,OAAO;YACT,cAAc;QAChB;IACF;IAEA,MAAM,gBAAgB;QACpB,OAAQ;YACN,KAAK;gBACH,qBAAO,6LAAC,iKAAkB,MAAM;;;;;YAClC,KAAK;gBACH,qBAAO,6LAAC,2JAAe,MAAM;;;;;YAC/B,KAAK;gBACH,qBAAO,6LAAC,6IAAQ;oBAAC,oBAAoB;;;;;;YACvC;gBACE,qBAAO,6LAAC,iKAAkB,MAAM;;;;;QACpC;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC,2IAAO;gBACN,YAAY;gBACZ,cAAc;gBACd,cAAc;;;;;;0BAEhB,6LAAC;gBAAK,WAAU;0BACb;;;;;;;;;;;;AAIT;GApDwB;KAAA"}}]
}