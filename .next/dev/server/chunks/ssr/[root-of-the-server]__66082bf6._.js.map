{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/morgannstuart/Desktop/HomeAssistDashboard/src/components/Sidebar.tsx"],"sourcesContent":["import { MessageSquare, Terminal, Settings, Zap } from 'lucide-react'\n\ninterface SidebarProps {\n  activeView: string\n  onViewChange: (view: string) => void\n  isConfigured?: boolean\n}\n\nexport function Sidebar({ activeView, onViewChange, isConfigured = false }: SidebarProps) {\n  return (\n    <aside className=\"sidebar\">\n      <div className=\"sidebar-header\">\n        <div className=\"logo\">\n          <Zap className=\"logo-icon\" />\n          <span>Dashboard</span>\n        </div>\n      </div>\n\n      <nav className=\"sidebar-nav\">\n        <div className=\"nav-section\">\n          <span className=\"nav-section-title\">Views</span>\n          <button\n            className={`nav-item ${activeView === 'conversations' ? 'active' : ''}`}\n            onClick={() => onViewChange('conversations')}\n          >\n            <MessageSquare size={18} />\n            <span>Conversations</span>\n          </button>\n          <button\n            className={`nav-item ${activeView === 'console' ? 'active' : ''}`}\n            onClick={() => onViewChange('console')}\n          >\n            <Terminal size={18} />\n            <span>Console</span>\n          </button>\n          <button\n            className={`nav-item ${activeView === 'settings' ? 'active' : ''}`}\n            onClick={() => onViewChange('settings')}\n          >\n            <Settings size={18} />\n            <span>Settings</span>\n          </button>\n        </div>\n      </nav>\n\n      <div className=\"sidebar-footer\">\n        <div className={`connection-status ${isConfigured ? 'connected' : ''}`}>\n          <span className=\"status-dot\" />\n          <span>{isConfigured ? 'Connected' : 'Not Connected'}</span>\n        </div>\n      </div>\n    </aside>\n  )\n}\n"],"names":[],"mappings":";;;;;AAAA;AAAA;AAAA;AAAA;;;AAQO,SAAS,QAAQ,EAAE,UAAU,EAAE,YAAY,EAAE,eAAe,KAAK,EAAgB;IACtF,qBACE,8OAAC;QAAM,WAAU;;0BACf,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,uMAAG;4BAAC,WAAU;;;;;;sCACf,8OAAC;sCAAK;;;;;;;;;;;;;;;;;0BAIV,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAK,WAAU;sCAAoB;;;;;;sCACpC,8OAAC;4BACC,WAAW,CAAC,SAAS,EAAE,eAAe,kBAAkB,WAAW,IAAI;4BACvE,SAAS,IAAM,aAAa;;8CAE5B,8OAAC,yOAAa;oCAAC,MAAM;;;;;;8CACrB,8OAAC;8CAAK;;;;;;;;;;;;sCAER,8OAAC;4BACC,WAAW,CAAC,SAAS,EAAE,eAAe,YAAY,WAAW,IAAI;4BACjE,SAAS,IAAM,aAAa;;8CAE5B,8OAAC,sNAAQ;oCAAC,MAAM;;;;;;8CAChB,8OAAC;8CAAK;;;;;;;;;;;;sCAER,8OAAC;4BACC,WAAW,CAAC,SAAS,EAAE,eAAe,aAAa,WAAW,IAAI;4BAClE,SAAS,IAAM,aAAa;;8CAE5B,8OAAC,sNAAQ;oCAAC,MAAM;;;;;;8CAChB,8OAAC;8CAAK;;;;;;;;;;;;;;;;;;;;;;;0BAKZ,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAW,CAAC,kBAAkB,EAAE,eAAe,cAAc,IAAI;;sCACpE,8OAAC;4BAAK,WAAU;;;;;;sCAChB,8OAAC;sCAAM,eAAe,cAAc;;;;;;;;;;;;;;;;;;;;;;;AAK9C"}},
    {"offset": {"line": 192, "column": 0}, "map": {"version":3,"sources":["file:///Users/morgannstuart/Desktop/HomeAssistDashboard/src/lib/supabase.ts"],"sourcesContent":["import { createClient, SupabaseClient } from '@supabase/supabase-js'\n\n// Check localStorage first, then fall back to env variables\nconst getSupabaseUrl = (): string => {\n  if (typeof window !== 'undefined') {\n    const stored = localStorage.getItem('supabase_url')\n    if (stored) return stored\n  }\n  return process.env.NEXT_PUBLIC_SUPABASE_URL || ''\n}\n\nconst getSupabaseAnonKey = (): string => {\n  if (typeof window !== 'undefined') {\n    const stored = localStorage.getItem('supabase_anon_key')\n    if (stored) return stored\n  }\n  return process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || ''\n}\n\nlet supabaseInstance: SupabaseClient | null = null\n\nexport const getSupabase = (): SupabaseClient => {\n  const url = getSupabaseUrl()\n  const key = getSupabaseAnonKey()\n  \n  if (!supabaseInstance && url && key) {\n    supabaseInstance = createClient(url, key)\n  }\n  \n  return supabaseInstance || createClient('https://placeholder.supabase.co', 'placeholder')\n}\n\nexport const reinitializeSupabase = (): SupabaseClient => {\n  const url = getSupabaseUrl()\n  const key = getSupabaseAnonKey()\n  \n  if (url && key) {\n    supabaseInstance = createClient(url, key)\n  }\n  \n  return supabaseInstance || createClient('https://placeholder.supabase.co', 'placeholder')\n}\n\nexport const isConfigured = (): boolean => {\n  const url = getSupabaseUrl()\n  const key = getSupabaseAnonKey()\n  return Boolean(url && key && url !== '' && key !== '')\n}\n\n// Create a Supabase client from provided credentials (for API routes)\nexport const createSupabaseFromCredentials = (url: string, key: string): SupabaseClient => {\n  return createClient(url, key)\n}\n"],"names":[],"mappings":";;;;;;;;;;AAAA;;AAEA,4DAA4D;AAC5D,MAAM,iBAAiB;IACrB;;IAIA,OAAO,QAAQ,GAAG,CAAC,wBAAwB,IAAI;AACjD;AAEA,MAAM,qBAAqB;IACzB;;IAIA,OAAO,QAAQ,GAAG,CAAC,6BAA6B,IAAI;AACtD;AAEA,IAAI,mBAA0C;AAEvC,MAAM,cAAc;IACzB,MAAM,MAAM;IACZ,MAAM,MAAM;IAEZ,IAAI,CAAC,oBAAoB,OAAO,KAAK;QACnC,mBAAmB,IAAA,uLAAY,EAAC,KAAK;IACvC;IAEA,OAAO,oBAAoB,IAAA,uLAAY,EAAC,mCAAmC;AAC7E;AAEO,MAAM,uBAAuB;IAClC,MAAM,MAAM;IACZ,MAAM,MAAM;IAEZ,IAAI,OAAO,KAAK;QACd,mBAAmB,IAAA,uLAAY,EAAC,KAAK;IACvC;IAEA,OAAO,oBAAoB,IAAA,uLAAY,EAAC,mCAAmC;AAC7E;AAEO,MAAM,eAAe;IAC1B,MAAM,MAAM;IACZ,MAAM,MAAM;IACZ,OAAO,QAAQ,OAAO,OAAO,QAAQ,MAAM,QAAQ;AACrD;AAGO,MAAM,gCAAgC,CAAC,KAAa;IACzD,OAAO,IAAA,uLAAY,EAAC,KAAK;AAC3B"}},
    {"offset": {"line": 244, "column": 0}, "map": {"version":3,"sources":["file:///Users/morgannstuart/Desktop/HomeAssistDashboard/src/components/ConversationViewer.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { getSupabase, isConfigured } from '@/lib/supabase'\nimport { \n  MessageSquare, \n  User, \n  Bot, \n  Wrench, \n  ChevronRight,\n  RefreshCw,\n  Search,\n  Clock,\n  ChevronDown,\n  ChevronUp,\n  Settings2,\n  Mic\n} from 'lucide-react'\nimport type { ConversationSession, ConversationMessage, ToolCall } from '@/types/database'\n\ninterface MessageWithTools extends ConversationMessage {\n  tool_calls: ToolCall[]\n}\n\nexport function ConversationViewer() {\n  const [sessions, setSessions] = useState<ConversationSession[]>([])\n  const [selectedSession, setSelectedSession] = useState<string | null>(null)\n  const [messages, setMessages] = useState<MessageWithTools[]>([])\n  const [loading, setLoading] = useState(true)\n  const [messagesLoading, setMessagesLoading] = useState(false)\n  const [searchTerm, setSearchTerm] = useState('')\n  const [expandedTools, setExpandedTools] = useState<Set<number>>(new Set())\n  const [error, setError] = useState<string | null>(null)\n\n  useEffect(() => {\n    if (isConfigured()) {\n      fetchSessions()\n    } else {\n      setLoading(false)\n      setError('Supabase not configured. Please add your credentials in Settings.')\n    }\n  }, [])\n\n  useEffect(() => {\n    if (selectedSession) {\n      fetchMessages(selectedSession)\n    }\n  }, [selectedSession])\n\n  const fetchSessions = async () => {\n    setLoading(true)\n    setError(null)\n    \n    try {\n      const supabase = getSupabase()\n      const { data, error: fetchError } = await supabase\n        .from('conversation_sessions')\n        .select('*')\n        .order('started_at', { ascending: false })\n        .limit(100)\n\n      if (fetchError) {\n        console.error('Fetch error:', fetchError)\n        const errorMsg = fetchError.message || fetchError.code || JSON.stringify(fetchError)\n        setError(errorMsg || 'Failed to fetch sessions')\n        return\n      }\n      \n      setSessions(data || [])\n      \n      if (data && data.length > 0 && !selectedSession) {\n        setSelectedSession(data[0].id)\n      }\n    } catch (err) {\n      console.error('Failed to fetch sessions:', err)\n      setError(err instanceof Error ? err.message : 'Failed to fetch sessions')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const fetchMessages = async (sessionId: string) => {\n    setMessagesLoading(true)\n    try {\n      const supabase = getSupabase()\n      \n      const { data: messagesData, error: messagesError } = await supabase\n        .from('conversation_messages')\n        .select('*')\n        .eq('session_id', sessionId)\n        .order('timestamp', { ascending: true })\n\n      if (messagesError) throw messagesError\n\n      if (!messagesData || messagesData.length === 0) {\n        setMessages([])\n        return\n      }\n\n      const assistantMessageIds = messagesData\n        .filter(m => m.role === 'assistant')\n        .map(m => m.id)\n\n      let toolCallsMap: Record<number, ToolCall[]> = {}\n\n      if (assistantMessageIds.length > 0) {\n        const { data: toolCallsData, error: toolCallsError } = await supabase\n          .from('tool_calls')\n          .select('*')\n          .in('message_id', assistantMessageIds)\n          .order('executed_at', { ascending: true })\n\n        if (toolCallsError) {\n          console.error('Failed to fetch tool calls:', toolCallsError)\n        } else if (toolCallsData) {\n          toolCallsMap = toolCallsData.reduce((acc, tc) => {\n            if (!acc[tc.message_id]) acc[tc.message_id] = []\n            acc[tc.message_id].push(tc)\n            return acc\n          }, {} as Record<number, ToolCall[]>)\n        }\n      }\n\n      const messagesWithTools: MessageWithTools[] = messagesData.map(msg => ({\n        ...msg,\n        tool_calls: toolCallsMap[msg.id] || []\n      }))\n\n      setMessages(messagesWithTools)\n    } catch (err) {\n      console.error('Failed to fetch messages:', err)\n    } finally {\n      setMessagesLoading(false)\n    }\n  }\n\n  const handleRefresh = () => {\n    fetchSessions()\n  }\n\n  const toggleToolExpanded = (toolId: number) => {\n    setExpandedTools(prev => {\n      const next = new Set(prev)\n      if (next.has(toolId)) {\n        next.delete(toolId)\n      } else {\n        next.add(toolId)\n      }\n      return next\n    })\n  }\n\n  const filteredSessions = sessions.filter(session => {\n    const searchLower = searchTerm.toLowerCase()\n    return (\n      session.id.toLowerCase().includes(searchLower) ||\n      session.user_id?.toLowerCase().includes(searchLower) ||\n      session.wake_word_model?.toLowerCase().includes(searchLower)\n    )\n  })\n\n  const formatDate = (dateStr: string) => {\n    const date = new Date(dateStr)\n    const now = new Date()\n    const diffMs = now.getTime() - date.getTime()\n    const diffMins = Math.floor(diffMs / 60000)\n    const diffHours = Math.floor(diffMs / 3600000)\n    const diffDays = Math.floor(diffMs / 86400000)\n\n    if (diffMins < 1) return 'Just now'\n    if (diffMins < 60) return `${diffMins}m ago`\n    if (diffHours < 24) return `${diffHours}h ago`\n    if (diffDays < 7) return `${diffDays}d ago`\n    return date.toLocaleDateString()\n  }\n\n  const formatDuration = (session: ConversationSession) => {\n    if (!session.ended_at) return 'Active'\n    const start = new Date(session.started_at).getTime()\n    const end = new Date(session.ended_at).getTime()\n    const durationMs = end - start\n    const seconds = Math.floor(durationMs / 1000)\n    const minutes = Math.floor(seconds / 60)\n    if (minutes > 0) return `${minutes}m ${seconds % 60}s`\n    return `${seconds}s`\n  }\n\n  const renderToolCall = (toolCall: ToolCall) => {\n    const isExpanded = expandedTools.has(toolCall.id)\n\n    return (\n      <div key={toolCall.id} className=\"tool-call\">\n        <button \n          className=\"tool-call-header\"\n          onClick={() => toggleToolExpanded(toolCall.id)}\n        >\n          <div className=\"tool-call-info\">\n            <Wrench size={14} />\n            <span className=\"tool-name\">{toolCall.tool_name}</span>\n            {toolCall.duration_ms && (\n              <span className=\"tool-duration\">{toolCall.duration_ms.toFixed(0)}ms</span>\n            )}\n          </div>\n          {isExpanded ? <ChevronUp size={14} /> : <ChevronDown size={14} />}\n        </button>\n        \n        {isExpanded && (\n          <div className=\"tool-call-details\">\n            <div className=\"tool-section\">\n              <span className=\"tool-section-label\">Arguments</span>\n              <pre className=\"tool-code\">\n                {JSON.stringify(toolCall.arguments, null, 2)}\n              </pre>\n            </div>\n            {toolCall.result && (\n              <div className=\"tool-section\">\n                <span className=\"tool-section-label\">Result</span>\n                <pre className=\"tool-code\">{toolCall.result}</pre>\n              </div>\n            )}\n            <div className=\"tool-meta\">\n              <span>Executed: {new Date(toolCall.executed_at).toLocaleTimeString()}</span>\n            </div>\n          </div>\n        )}\n      </div>\n    )\n  }\n\n  const renderMessage = (message: MessageWithTools) => {\n    const isUser = message.role === 'user'\n    const isAssistant = message.role === 'assistant'\n    const isSystem = message.role === 'system'\n\n    return (\n      <div key={message.id} className={`message ${message.role}`}>\n        <div className=\"message-avatar\">\n          {isUser && <User size={18} />}\n          {isAssistant && <Bot size={18} />}\n          {isSystem && <Settings2 size={18} />}\n        </div>\n        \n        <div className=\"message-body\">\n          <div className=\"message-header\">\n            <span className=\"message-role\">\n              {isUser && 'User'}\n              {isAssistant && 'Assistant'}\n              {isSystem && 'System'}\n            </span>\n            <span className=\"message-time\">\n              {new Date(message.timestamp).toLocaleTimeString()}\n            </span>\n            {message.confidence !== null && (\n              <span className=\"message-confidence\">\n                {(message.confidence * 100).toFixed(0)}% confidence\n              </span>\n            )}\n            {!message.is_final && (\n              <span className=\"message-interim\">interim</span>\n            )}\n          </div>\n          \n          <div className=\"message-content\">\n            {message.content}\n          </div>\n          \n          {message.tool_calls && message.tool_calls.length > 0 && (\n            <div className=\"tool-calls\">\n              <div className=\"tool-calls-header\">\n                <Wrench size={14} />\n                <span>{message.tool_calls.length} tool call{message.tool_calls.length > 1 ? 's' : ''}</span>\n              </div>\n              {message.tool_calls.map(tc => renderToolCall(tc))}\n            </div>\n          )}\n        </div>\n      </div>\n    )\n  }\n\n  const getSessionPreview = (session: ConversationSession) => {\n    if (selectedSession === session.id && messages.length > 0) {\n      const firstUserMsg = messages.find(m => m.role === 'user')\n      if (firstUserMsg) {\n        return firstUserMsg.content.slice(0, 50) + (firstUserMsg.content.length > 50 ? '...' : '')\n      }\n    }\n    return null\n  }\n\n  if (error) {\n    return (\n      <div className=\"conversation-viewer\">\n        <div className=\"error-state\">\n          <div className=\"error-icon\">⚠️</div>\n          <h2>Connection Error</h2>\n          <p>{error}</p>\n          <button className=\"retry-btn\" onClick={handleRefresh}>\n            <RefreshCw size={16} />\n            Retry\n          </button>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"conversation-viewer\">\n      <div className=\"conversations-sidebar\">\n        <div className=\"conversations-header\">\n          <h3>\n            <MessageSquare size={18} />\n            Sessions\n          </h3>\n          <button className=\"icon-btn\" onClick={handleRefresh} title=\"Refresh\">\n            <RefreshCw size={16} className={loading ? 'spinning' : ''} />\n          </button>\n        </div>\n        \n        <div className=\"conversations-search\">\n          <Search size={14} />\n          <input\n            type=\"text\"\n            placeholder=\"Search sessions...\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n          />\n        </div>\n\n        <div className=\"conversations-list\">\n          {loading ? (\n            <div className=\"loading-state small\">\n              <div className=\"spinner\" />\n            </div>\n          ) : filteredSessions.length === 0 ? (\n            <div className=\"empty-conversations\">\n              <MessageSquare size={24} />\n              <span>No sessions found</span>\n            </div>\n          ) : (\n            filteredSessions.map((session) => (\n              <button\n                key={session.id}\n                className={`conversation-item ${selectedSession === session.id ? 'active' : ''}`}\n                onClick={() => setSelectedSession(session.id)}\n              >\n                <div className=\"conversation-info\">\n                  <span className=\"conversation-title\">\n                    {session.wake_word_model ? (\n                      <><Mic size={12} /> {session.wake_word_model}</>\n                    ) : (\n                      `Session ${session.id.slice(0, 8)}...`\n                    )}\n                  </span>\n                  <span className=\"conversation-preview\">\n                    {getSessionPreview(session) || `User: ${session.user_id}`}\n                  </span>\n                  <div className=\"session-meta-row\">\n                    <span className={`session-status ${session.ended_at ? 'ended' : 'active'}`}>\n                      {session.ended_at ? 'Ended' : 'Active'}\n                    </span>\n                    <span className=\"session-duration\">{formatDuration(session)}</span>\n                  </div>\n                </div>\n                <div className=\"conversation-meta\">\n                  <Clock size={12} />\n                  <span>{formatDate(session.started_at)}</span>\n                </div>\n                <ChevronRight size={14} className=\"conversation-arrow\" />\n              </button>\n            ))\n          )}\n        </div>\n      </div>\n\n      <div className=\"messages-panel\">\n        {!selectedSession ? (\n          <div className=\"no-conversation\">\n            <MessageSquare size={48} />\n            <h2>Select a Session</h2>\n            <p>Choose a conversation session from the sidebar to view its messages</p>\n          </div>\n        ) : messagesLoading ? (\n          <div className=\"loading-state\">\n            <div className=\"spinner\" />\n            <span>Loading messages...</span>\n          </div>\n        ) : messages.length === 0 ? (\n          <div className=\"no-messages\">\n            <MessageSquare size={32} />\n            <p>No messages in this session</p>\n          </div>\n        ) : (\n          <div className=\"messages-container\">\n            <div className=\"messages-header\">\n              <div className=\"messages-header-info\">\n                <h2>\n                  {sessions.find(s => s.id === selectedSession)?.wake_word_model || \n                   `Session ${selectedSession.slice(0, 8)}...`}\n                </h2>\n                <span className=\"session-id\">{selectedSession}</span>\n              </div>\n              <div className=\"messages-header-meta\">\n                <span className=\"message-count\">{messages.length} messages</span>\n                <span className=\"tool-count\">\n                  {messages.reduce((acc, m) => acc + (m.tool_calls?.length || 0), 0)} tool calls\n                </span>\n              </div>\n            </div>\n            <div className=\"messages-list\">\n              {messages.map(renderMessage)}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1153, "column": 0}, "map": {"version":3,"sources":["file:///Users/morgannstuart/Desktop/HomeAssistDashboard/src/components/RealtimeMonitor.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect, useRef } from 'react'\nimport { getSupabase, isConfigured } from '@/lib/supabase'\nimport { RealtimeChannel } from '@supabase/supabase-js'\nimport { Activity, Play, Square, Trash2, Filter, MessageSquare, Wrench, Radio, Key } from 'lucide-react'\nimport type { RealtimeEvent } from '@/types/database'\n\nconst MONITORED_TABLES = ['conversation_sessions', 'conversation_messages', 'tool_calls']\n\nexport function RealtimeMonitor() {\n  const [events, setEvents] = useState<RealtimeEvent[]>([])\n  const [isListening, setIsListening] = useState(false)\n  const [selectedTables, setSelectedTables] = useState<string[]>(MONITORED_TABLES)\n  const [filterType, setFilterType] = useState<string>('all')\n  const [configured, setConfigured] = useState(false)\n  const [consoleToken, setConsoleToken] = useState<string | null>(null)\n  const channelRef = useRef<RealtimeChannel | null>(null)\n  const eventsEndRef = useRef<HTMLDivElement>(null)\n\n  useEffect(() => {\n    setConfigured(isConfigured())\n    const token = localStorage.getItem('console_token')\n    setConsoleToken(token)\n  }, [])\n\n  const startListening = () => {\n    if (selectedTables.length === 0 || !configured) return\n\n    const supabase = getSupabase()\n    const channel = supabase.channel('realtime-monitor')\n\n    selectedTables.forEach((table) => {\n      channel.on(\n        'postgres_changes',\n        { event: '*', schema: 'public', table },\n        (payload) => {\n          const newData = payload.new as Record<string, unknown> | undefined\n          const oldData = payload.old as Record<string, unknown> | undefined\n          const metadata = (newData?.metadata || oldData?.metadata) as Record<string, unknown> | undefined\n          \n          // Filter by console_token if set\n          if (consoleToken) {\n            const eventToken = metadata?.console_token as string | undefined\n            if (eventToken !== consoleToken) {\n              return // Skip events that don't match our token\n            }\n          }\n          \n          const event: RealtimeEvent = {\n            id: `${Date.now()}-${Math.random()}`,\n            timestamp: new Date(),\n            table,\n            eventType: payload.eventType as 'INSERT' | 'UPDATE' | 'DELETE',\n            payload: payload.new || payload.old || {}\n          }\n          setEvents((prev) => [event, ...prev].slice(0, 200))\n        }\n      )\n    })\n\n    channel.subscribe((status) => {\n      if (status === 'SUBSCRIBED') {\n        setIsListening(true)\n      }\n    })\n\n    channelRef.current = channel\n  }\n\n  const stopListening = () => {\n    if (channelRef.current) {\n      const supabase = getSupabase()\n      supabase.removeChannel(channelRef.current)\n      channelRef.current = null\n    }\n    setIsListening(false)\n  }\n\n  const toggleTable = (table: string) => {\n    setSelectedTables((prev) =>\n      prev.includes(table)\n        ? prev.filter((t) => t !== table)\n        : [...prev, table]\n    )\n  }\n\n  const clearEvents = () => {\n    setEvents([])\n  }\n\n  const filteredEvents = events.filter((event) =>\n    filterType === 'all' ? true : event.eventType === filterType\n  )\n\n  useEffect(() => {\n    return () => {\n      stopListening()\n    }\n  }, [])\n\n  useEffect(() => {\n    if (events.length > 0) {\n      eventsEndRef.current?.scrollIntoView({ behavior: 'smooth' })\n    }\n  }, [events.length])\n\n  const getEventColor = (type: string) => {\n    switch (type) {\n      case 'INSERT':\n        return 'event-insert'\n      case 'UPDATE':\n        return 'event-update'\n      case 'DELETE':\n        return 'event-delete'\n      default:\n        return ''\n    }\n  }\n\n  const getTableIcon = (table: string) => {\n    if (table === 'conversation_messages') return <MessageSquare size={14} />\n    if (table === 'tool_calls') return <Wrench size={14} />\n    if (table === 'conversation_sessions') return <Radio size={14} />\n    return <Activity size={14} />\n  }\n\n  const getTableLabel = (table: string) => {\n    switch (table) {\n      case 'conversation_sessions': return 'Sessions'\n      case 'conversation_messages': return 'Messages'\n      case 'tool_calls': return 'Tool Calls'\n      default: return table\n    }\n  }\n\n  const renderEventPreview = (event: RealtimeEvent) => {\n    const payload = event.payload\n    const role = payload.role as string | undefined\n    const content = payload.content as string | undefined\n    const wakeWordModel = payload.wake_word_model as string | undefined\n    const endedAt = payload.ended_at as string | undefined\n    const userId = payload.user_id as string | undefined\n    const toolName = payload.tool_name as string | undefined\n    const durationMs = payload.duration_ms as number | undefined\n    const result = payload.result as string | undefined\n    \n    if (event.table === 'conversation_messages') {\n      return (\n        <div className=\"event-preview\">\n          {role && <span className=\"preview-role\">{role}</span>}\n          {content && (\n            <span className=\"preview-content\">\n              {content.slice(0, 100)}\n              {content.length > 100 ? '...' : ''}\n            </span>\n          )}\n        </div>\n      )\n    }\n\n    if (event.table === 'conversation_sessions') {\n      return (\n        <div className=\"event-preview\">\n          {wakeWordModel && (\n            <span className=\"preview-title\">Wake word: {wakeWordModel}</span>\n          )}\n          <span className=\"preview-id\">\n            {endedAt ? 'Session ended' : 'Session started'}\n            {userId && ` • User: ${userId}`}\n          </span>\n        </div>\n      )\n    }\n\n    if (event.table === 'tool_calls') {\n      return (\n        <div className=\"event-preview\">\n          {toolName && (\n            <span className=\"preview-tool\">\n              <Wrench size={12} />\n              {toolName}\n            </span>\n          )}\n          {durationMs !== undefined && (\n            <span className=\"preview-duration\">{durationMs.toFixed(0)}ms</span>\n          )}\n          {result && (\n            <span className=\"preview-content\">\n              {result.slice(0, 80)}\n              {result.length > 80 ? '...' : ''}\n            </span>\n          )}\n        </div>\n      )\n    }\n\n    return null\n  }\n\n  if (!configured) {\n    return (\n      <div className=\"realtime-monitor\">\n        <div className=\"error-state\">\n          <div className=\"error-icon\">⚠️</div>\n          <h2>Not Configured</h2>\n          <p>Please add your Supabase credentials in Settings to monitor realtime events.</p>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"realtime-monitor\">\n      <div className=\"monitor-header\">\n        <div className=\"monitor-title\">\n          <Activity size={20} className={isListening ? 'pulse' : ''} />\n          <h2>Realtime Events</h2>\n          {isListening && <span className=\"live-badge\">LIVE</span>}\n        </div>\n        <div className=\"monitor-actions\">\n          {!isListening ? (\n            <button\n              className=\"action-btn start\"\n              onClick={startListening}\n              disabled={selectedTables.length === 0}\n            >\n              <Play size={16} />\n              Start Listening\n            </button>\n          ) : (\n            <button className=\"action-btn stop\" onClick={stopListening}>\n              <Square size={16} />\n              Stop\n            </button>\n          )}\n          <button\n            className=\"icon-btn\"\n            onClick={clearEvents}\n            disabled={events.length === 0}\n          >\n            <Trash2 size={16} />\n          </button>\n        </div>\n      </div>\n\n      <div className=\"monitor-body\">\n        <div className=\"monitor-sidebar\">\n          {/* Console Token Display */}\n          <div className=\"sidebar-section\">\n            <h4>\n              <Key size={14} />\n              Console Token\n            </h4>\n            {consoleToken ? (\n              <div className=\"token-display\">\n                {consoleToken.slice(0, 16)}...\n              </div>\n            ) : (\n              <div className=\"token-warning\">\n                No token set - showing all events\n              </div>\n            )}\n          </div>\n\n          <div className=\"sidebar-section\">\n            <h4>Monitor Tables</h4>\n            <div className=\"table-checkboxes\">\n              {MONITORED_TABLES.map((table) => (\n                <label key={table} className=\"checkbox-label\">\n                  <input\n                    type=\"checkbox\"\n                    checked={selectedTables.includes(table)}\n                    onChange={() => toggleTable(table)}\n                    disabled={isListening}\n                  />\n                  <span>{getTableLabel(table)}</span>\n                </label>\n              ))}\n            </div>\n          </div>\n\n          <div className=\"sidebar-section\">\n            <h4>\n              <Filter size={14} />\n              Filter Events\n            </h4>\n            <div className=\"filter-buttons\">\n              {['all', 'INSERT', 'UPDATE', 'DELETE'].map((type) => (\n                <button\n                  key={type}\n                  className={`filter-btn ${filterType === type ? 'active' : ''}`}\n                  onClick={() => setFilterType(type)}\n                >\n                  {type === 'all' ? 'All' : type}\n                </button>\n              ))}\n            </div>\n          </div>\n\n          <div className=\"sidebar-section stats\">\n            <h4>Statistics</h4>\n            <div className=\"stat-item\">\n              <span>Total Events</span>\n              <strong>{events.length}</strong>\n            </div>\n            <div className=\"stat-item\">\n              <span>Inserts</span>\n              <strong className=\"text-green\">\n                {events.filter((e) => e.eventType === 'INSERT').length}\n              </strong>\n            </div>\n            <div className=\"stat-item\">\n              <span>Updates</span>\n              <strong className=\"text-yellow\">\n                {events.filter((e) => e.eventType === 'UPDATE').length}\n              </strong>\n            </div>\n            <div className=\"stat-item\">\n              <span>Deletes</span>\n              <strong className=\"text-red\">\n                {events.filter((e) => e.eventType === 'DELETE').length}\n              </strong>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"events-panel\">\n          {filteredEvents.length === 0 ? (\n            <div className=\"empty-events\">\n              {isListening ? (\n                <>\n                  <Activity size={32} className=\"pulse\" />\n                  <p>Waiting for events...</p>\n                  <span>\n                    {consoleToken \n                      ? `Filtering by token: ${consoleToken.slice(0, 8)}...`\n                      : 'Showing all database changes'}\n                  </span>\n                </>\n              ) : (\n                <>\n                  <Activity size={32} />\n                  <p>Not listening</p>\n                  <span>Click \"Start Listening\" to monitor database changes</span>\n                </>\n              )}\n            </div>\n          ) : (\n            <div className=\"events-list\">\n              {filteredEvents.map((event) => (\n                <div key={event.id} className={`event-item ${getEventColor(event.eventType)}`}>\n                  <div className=\"event-header\">\n                    <span className={`event-type ${event.eventType.toLowerCase()}`}>\n                      {event.eventType}\n                    </span>\n                    <span className=\"event-table\">\n                      {getTableIcon(event.table)}\n                      {getTableLabel(event.table)}\n                    </span>\n                    <span className=\"event-time\">\n                      {event.timestamp.toLocaleTimeString()}\n                    </span>\n                  </div>\n                  {renderEventPreview(event)}\n                  <details className=\"event-details\">\n                    <summary>Raw payload</summary>\n                    <pre className=\"event-payload\">\n                      {JSON.stringify(event.payload, null, 2)}\n                    </pre>\n                  </details>\n                </div>\n              ))}\n              <div ref={eventsEndRef} />\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2016, "column": 0}, "map": {"version":3,"sources":["file:///Users/morgannstuart/Desktop/HomeAssistDashboard/src/components/Settings.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { Save, Check, AlertCircle, ExternalLink, RefreshCw, Copy, Key } from 'lucide-react'\nimport { isConfigured, reinitializeSupabase } from '@/lib/supabase'\n\ninterface SettingsProps {\n  onConnectionChange?: () => void\n}\n\nexport function Settings({ onConnectionChange }: SettingsProps) {\n  const [url, setUrl] = useState('')\n  const [anonKey, setAnonKey] = useState('')\n  const [consoleToken, setConsoleToken] = useState('')\n  const [saved, setSaved] = useState(false)\n  const [connected, setConnected] = useState(false)\n  const [testing, setTesting] = useState(false)\n  const [testError, setTestError] = useState<string | null>(null)\n  const [copiedCredentials, setCopiedCredentials] = useState(false)\n  const [copiedToken, setCopiedToken] = useState(false)\n\n  useEffect(() => {\n    const savedUrl = localStorage.getItem('supabase_url') || ''\n    const savedKey = localStorage.getItem('supabase_anon_key') || ''\n    const savedToken = localStorage.getItem('console_token') || ''\n    setUrl(savedUrl)\n    setAnonKey(savedKey)\n    setConsoleToken(savedToken)\n    setConnected(isConfigured())\n  }, [])\n\n  const handleSave = async () => {\n    localStorage.setItem('supabase_url', url)\n    localStorage.setItem('supabase_anon_key', anonKey)\n    localStorage.setItem('console_token', consoleToken)\n    \n    reinitializeSupabase()\n    \n    setSaved(true)\n    setConnected(isConfigured())\n    setTimeout(() => setSaved(false), 2000)\n    \n    await testConnection()\n    onConnectionChange?.()\n  }\n\n  const testConnection = async () => {\n    setTesting(true)\n    setTestError(null)\n    \n    try {\n      const client = reinitializeSupabase()\n      \n      const { error } = await client\n        .from('conversation_sessions')\n        .select('id')\n        .limit(1)\n      \n      if (error) {\n        setTestError(error.message)\n        setConnected(false)\n      } else {\n        setConnected(true)\n        setTestError(null)\n      }\n    } catch (err) {\n      setTestError(err instanceof Error ? err.message : 'Connection failed')\n      setConnected(false)\n    } finally {\n      setTesting(false)\n    }\n  }\n\n  const generateToken = () => {\n    const newToken = crypto.randomUUID()\n    setConsoleToken(newToken)\n  }\n\n  const copyCredentialsExample = () => {\n    const example = `{\n  \"supabase_url\": \"${url}\",\n  \"supabase_key\": \"${anonKey}\",\n  \"console_token\": \"${consoleToken}\",\n  \"user_id\": \"my-chatbot\",\n  \"wake_word_model\": \"hey-assistant\"\n}`\n    navigator.clipboard.writeText(example)\n    setCopiedCredentials(true)\n    setTimeout(() => setCopiedCredentials(false), 2000)\n  }\n\n  const copyToken = () => {\n    navigator.clipboard.writeText(consoleToken)\n    setCopiedToken(true)\n    setTimeout(() => setCopiedToken(false), 2000)\n  }\n\n  return (\n    <div className=\"settings-page\">\n      <div className=\"settings-header\">\n        <h2>Settings</h2>\n        <p>Configure your database connection and console token</p>\n      </div>\n\n      <div className=\"settings-content\">\n        {/* Connection Status */}\n        <div className=\"settings-card\">\n          <div className=\"card-header\">\n            <h3>Connection Status</h3>\n            <button \n              className=\"icon-btn\" \n              onClick={testConnection}\n              disabled={testing || !url || !anonKey}\n              title=\"Test connection\"\n            >\n              <RefreshCw size={16} className={testing ? 'spinning' : ''} />\n            </button>\n          </div>\n          <div className=\"card-body\">\n            <div className={`status-indicator ${connected && !testError ? 'connected' : 'disconnected'}`}>\n              {connected && !testError ? (\n                <>\n                  <Check size={20} />\n                  <span>Connected to Supabase</span>\n                </>\n              ) : (\n                <>\n                  <AlertCircle size={20} />\n                  <span>\n                    {testError || 'Not connected - Enter your credentials below'}\n                  </span>\n                </>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Supabase Credentials */}\n        <div className=\"settings-card\">\n          <div className=\"card-header\">\n            <h3>Database Credentials</h3>\n            <a\n              href=\"https://supabase.com/dashboard\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"external-link\"\n            >\n              Open Supabase\n              <ExternalLink size={14} />\n            </a>\n          </div>\n          <div className=\"card-body\">\n            <p className=\"info-text\">\n              These credentials let you view conversation history from your database.\n            </p>\n            <div className=\"form-group\">\n              <label htmlFor=\"supabase-url\">Project URL</label>\n              <input\n                id=\"supabase-url\"\n                type=\"text\"\n                placeholder=\"https://your-project.supabase.co\"\n                value={url}\n                onChange={(e) => setUrl(e.target.value)}\n              />\n            </div>\n\n            <div className=\"form-group\">\n              <label htmlFor=\"anon-key\">Anon/Public Key</label>\n              <input\n                id=\"anon-key\"\n                type=\"password\"\n                placeholder=\"your-anon-key\"\n                value={anonKey}\n                onChange={(e) => setAnonKey(e.target.value)}\n              />\n            </div>\n          </div>\n        </div>\n\n        {/* Console Token */}\n        <div className=\"settings-card\">\n          <div className=\"card-header\">\n            <h3>Console Token</h3>\n            <Key size={18} />\n          </div>\n          <div className=\"card-body\">\n            <p className=\"info-text\">\n              This token filters which API events appear in the Realtime Events console. \n              Use the same token in your chatbot's API requests.\n            </p>\n            <div className=\"form-group\">\n              <label htmlFor=\"console-token\">Token</label>\n              <div className=\"token-input-row\">\n                <input\n                  id=\"console-token\"\n                  type=\"text\"\n                  placeholder=\"Enter or generate a token\"\n                  value={consoleToken}\n                  onChange={(e) => setConsoleToken(e.target.value)}\n                />\n                <button \n                  className=\"icon-btn\" \n                  onClick={copyToken} \n                  title=\"Copy token\"\n                  disabled={!consoleToken}\n                >\n                  {copiedToken ? <Check size={16} /> : <Copy size={16} />}\n                </button>\n              </div>\n            </div>\n            <button className=\"secondary-btn\" onClick={generateToken}>\n              Generate Random Token\n            </button>\n          </div>\n        </div>\n\n        {/* Save Button */}\n        <button \n          className=\"save-btn full-width\" \n          onClick={handleSave}\n          disabled={!url || !anonKey}\n        >\n          {testing ? (\n            <>\n              <RefreshCw size={16} className=\"spinning\" />\n              Testing...\n            </>\n          ) : saved ? (\n            <>\n              <Check size={16} />\n              Saved!\n            </>\n          ) : (\n            <>\n              <Save size={16} />\n              Save Settings\n            </>\n          )}\n        </button>\n\n        {/* API Usage */}\n        <div className=\"settings-card\">\n          <div className=\"card-header\">\n            <h3>API Usage</h3>\n            <button \n              className=\"icon-btn\"\n              onClick={copyCredentialsExample}\n              disabled={!url || !anonKey}\n              title=\"Copy example\"\n            >\n              {copiedCredentials ? <Check size={16} /> : <Copy size={16} />}\n            </button>\n          </div>\n          <div className=\"card-body\">\n            <p className=\"info-text\">\n              Include credentials and console token in API requests:\n            </p>\n            <pre className=\"code-block\">\n{`POST /api/sessions\n{\n  \"supabase_url\": \"${url || 'YOUR_URL'}\",\n  \"supabase_key\": \"${anonKey ? '***' : 'YOUR_KEY'}\",\n  \"console_token\": \"${consoleToken || 'YOUR_TOKEN'}\",\n  \"user_id\": \"my-chatbot\"\n}`}\n            </pre>\n            <ul className=\"endpoint-list\">\n              <li><code>POST /api/sessions</code> - Create a session</li>\n              <li><code>POST /api/messages</code> - Add a message</li>\n              <li><code>POST /api/tool-calls</code> - Record a tool call</li>\n              <li><code>POST /api/sessions/[id]/end</code> - End a session</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2676, "column": 0}, "map": {"version":3,"sources":["file:///Users/morgannstuart/Desktop/HomeAssistDashboard/src/app/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect, useCallback } from 'react'\nimport { Sidebar } from '@/components/Sidebar'\nimport { ConversationViewer } from '@/components/ConversationViewer'\nimport { RealtimeMonitor } from '@/components/RealtimeMonitor'\nimport { Settings } from '@/components/Settings'\nimport { isConfigured } from '@/lib/supabase'\n\nexport default function Home() {\n  const [activeView, setActiveView] = useState('conversations')\n  const [configured, setConfigured] = useState(false)\n  const [key, setKey] = useState(0)\n\n  const checkConfiguration = useCallback(() => {\n    const isReady = isConfigured()\n    setConfigured(isReady)\n    if (!isReady) {\n      setActiveView('settings')\n    }\n  }, [])\n\n  useEffect(() => {\n    checkConfiguration()\n  }, [checkConfiguration])\n\n  const handleConnectionChange = () => {\n    checkConfiguration()\n    setKey(prev => prev + 1)\n    if (isConfigured()) {\n      setActiveView('conversations')\n    }\n  }\n\n  const renderContent = () => {\n    switch (activeView) {\n      case 'conversations':\n        return <ConversationViewer key={key} />\n      case 'realtime':\n        return <RealtimeMonitor key={key} />\n      case 'settings':\n        return <Settings onConnectionChange={handleConnectionChange} />\n      default:\n        return <ConversationViewer key={key} />\n    }\n  }\n\n  return (\n    <div className=\"app\">\n      <Sidebar\n        activeView={activeView}\n        onViewChange={setActiveView}\n        isConfigured={configured}\n      />\n      <main className=\"main-content\">\n        {renderContent()}\n      </main>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AAPA;;;;;;;;AASe,SAAS;IACtB,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAC7C,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAC7C,MAAM,CAAC,KAAK,OAAO,GAAG,IAAA,iNAAQ,EAAC;IAE/B,MAAM,qBAAqB,IAAA,oNAAW,EAAC;QACrC,MAAM,UAAU,IAAA,sIAAY;QAC5B,cAAc;QACd,IAAI,CAAC,SAAS;YACZ,cAAc;QAChB;IACF,GAAG,EAAE;IAEL,IAAA,kNAAS,EAAC;QACR;IACF,GAAG;QAAC;KAAmB;IAEvB,MAAM,yBAAyB;QAC7B;QACA,OAAO,CAAA,OAAQ,OAAO;QACtB,IAAI,IAAA,sIAAY,KAAI;YAClB,cAAc;QAChB;IACF;IAEA,MAAM,gBAAgB;QACpB,OAAQ;YACN,KAAK;gBACH,qBAAO,8OAAC,8JAAkB,MAAM;;;;;YAClC,KAAK;gBACH,qBAAO,8OAAC,wJAAe,MAAM;;;;;YAC/B,KAAK;gBACH,qBAAO,8OAAC,0IAAQ;oBAAC,oBAAoB;;;;;;YACvC;gBACE,qBAAO,8OAAC,8JAAkB,MAAM;;;;;QACpC;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,wIAAO;gBACN,YAAY;gBACZ,cAAc;gBACd,cAAc;;;;;;0BAEhB,8OAAC;gBAAK,WAAU;0BACb;;;;;;;;;;;;AAIT"}}]
}